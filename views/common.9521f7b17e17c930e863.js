(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0r5Y":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("gIcY"),o=s("LvDl"),r=(s("a9NN"),function(){function e(e,t,s,o,r){this.request=e,this.toastr=t,this.router=s,this.dialogRef=r,this.Roles=[],this.user_roles=[],this.user_details={},this.isLoading=!1,this.selectedRole=new i.f}return e.prototype.ngOnInit=function(){this.GetRoles(),this.user_details=JSON.parse(sessionStorage.getItem("update_user")),this.user_roles=this.user_details.roles||[]},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.GetRoles=function(){var e=this;this.request.PostRequest("api/role/list_all",{query:{}},function(t){"00"===t.code&&(e.Roles=t.data)},this.dialogRef)},e.prototype.RemoveUserRoles=function(){this.isLoading=!0,this.user_details.roles=o.difference(this.user_roles,this.selectedRole.value);var e=this;this.request.PostRequest("api/user/updated_user",{update_user:this.user_details},function(t){"00"===t.code?(e.toastr.success("User role removed successfully","Remove User Role",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Remove User Role")},this.dialogRef)},e.prototype.displayRole=function(e){var t=o.findIndex(this.Roles,{_id:e});return this.Roles[t].name},e}())},"1AMP":function(e,t,s){"use strict";s.d(t,"a",function(){return i}),s("a9NN");var i=function(){function e(e,t,s,i){this.request=e,this.toastr=t,this.dialogRef=i,this.dialogTitle="Not Title",this.dialogMessage="No Message",this.action="",this.data={}}return e.prototype.ngOnInit=function(){this.dialogTitle=sessionStorage.getItem("title"),this.dialogMessage=sessionStorage.getItem("message"),this.action=sessionStorage.getItem("action"),this.data=JSON.parse(sessionStorage.getItem("data"))},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.doAction=function(){switch(this.action){case"password-reissue":this.reissuePassword();break;default:this.toastr.error("The is no action provided","Confirm Dialog")}},e.prototype.reissuePassword=function(){var e=this;this.request.PostRequest("api/user/reissue_user_password",{query:{msisdn:this.data.msisdn}},function(t){"00"===t.code?(e.toastr.success("user password successfully re-issued",e.dialogTitle,{timeOut:3e3}),e.dialogRef.close()):(e.toastr.error(t.message,e.dialogTitle,{timeOut:3e3}),e.dialogRef.close())},this.dialogRef)},e}()},FuGI:function(e,t,s){"use strict";s.d(t,"a",function(){return o});var i=s("gIcY"),o=(s("a9NN"),function(){function e(e,t,s,i,o,r){this.formBuilder=e,this.request=t,this.toastr=s,this.router=i,this.dialogRef=r,this.role_details={},this.isLoading=!1}return e.prototype.ngOnInit=function(){this.role_details=JSON.parse(sessionStorage.getItem("selectedRole")),this.createForm(this.role_details)},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.onComplete=function(){var e=this;e.isLoading=!0,e.role_details.name=e.searchForm.value.name.toUpperCase(),e.role_details.description=e.searchForm.value.description.toUpperCase(),e.request.PostRequest("api/role/edit",{role:e.role_details},function(t){"00"===t.code?(e.toastr.success("role updated successfully","Edit Role",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Edit Role")},e.dialogRef)},e.prototype.createForm=function(e){this.searchForm=this.formBuilder.group({name:[e.name,i.w.required],description:[e.description,i.w.required]})},e}())},GVtu:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("gIcY"),o=s("LvDl"),r=(s("a9NN"),function(){function e(e,t,s,o,r){this.request=e,this.toastr=t,this.router=s,this.dialogRef=r,this.Permissions=[],this.application_permissions=[],this.application_details={},this.isLoading=!1,this.selectedPermissions=new i.f}return e.prototype.ngOnInit=function(){this.GetPermissions(),this.application_details=JSON.parse(sessionStorage.getItem("selectedApplication")),this.application_permissions=this.application_details.permissions||[]},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.GetPermissions=function(){var e=this;this.request.PostRequest("api/permission/list_all",{query:{}},function(t){"00"===t.code&&(e.Permissions=t.data)},this.dialogRef)},e.prototype.RemoveApplicationPermissions=function(){this.isLoading=!0,this.application_details.permissions=o.difference(this.application_permissions,this.selectedPermissions.value);var e=this;this.request.PostRequest("api/application/edit",{applications:this.application_details},function(t){"00"===t.code?(e.toastr.success("application permisions removed successfully","Remove Application Permisions",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Remove Application Permisions")},this.dialogRef)},e.prototype.displayPermission=function(e){var t=o.findIndex(this.Permissions,{_id:e});return this.Permissions[t].code},e}())},GsLz:function(e,t,s){"use strict";function i(e){var t,s;return function(i){if(!i.parent)return null;if(!t){if(t=i,!(s=i.parent.get(e)))throw new Error("matchOtherValidator(): other control is not found in parent group");s.valueChanges.subscribe(function(){t.updateValueAndValidity()})}return s&&s.value!==t.value?{matchOther:!0}:null}}s.d(t,"a",function(){return i})},Hctz:function(e,t,s){"use strict";function i(e){var t=new o(e);return function(e){return t.validate(e.value)}}s.d(t,"a",function(){return i});var o=function(){function e(e){this.options=e,this.letterMatcher=/[a-zA-Z]/,this.lowerCaseLetterMatcher=/[a-z]/,this.upperCaseLetterMatcher=/[A-Z]/,this.numberMatcher=/[0-9]/,this.specialCharactersMatcher=/[-+=_.,:;~`!@#$%^&*(){}<>\[\]"'\/\\]/}return e.prototype.validate=function(e){if(!e)return null;var t={};return this.options.minLength>0&&e.length<this.options.minLength&&(t.passwordMinLengthRequired={minLength:this.options.minLength}),this.options.maxLength>=0&&e.length>this.options.maxLength&&(t.passwordMaxLengthExceeded={maxLength:this.options.maxLength}),this.options.requireLetters&&!this.letterMatcher.test(e)&&(t.passwordLetterRequired=!0),this.options.requireLowerCaseLetters&&!this.lowerCaseLetterMatcher.test(e)&&(t.passwordLowerCaseLetterRequired=!0),this.options.requireUpperCaseLetters&&!this.upperCaseLetterMatcher.test(e)&&(t.passwordUpperCaseLetterRequired=!0),this.options.requireNumbers&&!this.numberMatcher.test(e)&&(t.passwordNumberRequired=!0),this.options.requireSpecialCharacters&&!this.specialCharactersMatcher.test(e)&&(t.passwordSpecialCharacterRequired=!0),Object.keys(t).length>0?t:null},e}()},"HwH+":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("gIcY"),o=s("LvDl"),r=(s("a9NN"),function(){function e(e,t,s,o,r,n){this.formBuilder=e,this.request=t,this.toastr=s,this.router=o,this.dialogRef=n,this.permission_details=[],this.permission={},this.isLoading=!1,this.isChanged=!1,this.options={query:{},config_name:["MENU_TYPES","MENU_CATAGORIES","MENU_LIST","SYSTEM_CHANNELS"]},this.Category=[],this.Type=[],this.Menu=[],this.Channel=[],this.type=new i.f,this.menu=new i.f,this.channel=new i.f}return e.prototype.ngOnInit=function(){this.permission=JSON.parse(sessionStorage.getItem("permission")),this.permission_details=o.values(this.permission),this.createForm(this.permission),this.getConfig()},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.onChange=function(){this.isChanged=!0},e.prototype.getConfig=function(){var e=this;e.request.PostRequest("api/user/list_config",this.options,function(t){"00"===t.code&&t.data?(e.Category=t.data.MENU_CATAGORIES,e.Type=t.data.MENU_TYPES,e.Menu=t.data.MENU_LIST,e.Channel=t.data.SYSTEM_CHANNELS):e.toastr.warning("No Configs(s) found","NOTE")},this.dialogRef)},e.prototype.savePermission=function(){var e=this;o.difference(e.permission_details,o.values(e.permission)).length>0?(e.isLoading=!0,e.request.PostRequest("api/permission/edit",{permission:e.permission},function(t){"00"===t.code?(e.toastr.success("permission updated successfully","Edit Permission",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):(e.isLoading=!1,e.toastr.error(t.message,"Edit Permission"))},e.dialogRef)):e.toastr.warning("No Change has been detected so action is withheld","Add Permission")},e.prototype.createForm=function(e){this.searchForm=this.formBuilder.group({code:[{value:e.code,disabled:!0},i.w.required]})},e}())},"KOg+":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("gIcY"),o=s("LvDl"),r=(s("a9NN"),function(){function e(e,t,s,o,r){this.request=e,this.toastr=t,this.router=s,this.dialogRef=r,this.Permissions=[],this.application_permissions=[],this.application_details={},this.isLoading=!1,this.selectedPermissions=new i.f}return e.prototype.ngOnInit=function(){this.GetPermissions(),this.application_details=JSON.parse(sessionStorage.getItem("selectedApplication")),this.application_permissions=this.application_details.permissions||[]},e.prototype.GetPermissions=function(){var e=this;this.request.PostRequest("api/permission/list_all",{query:{}},function(t){"00"===t.code&&(e.Permissions=t.data)},this.dialogRef)},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.AddApplicationPermissions=function(){this.isLoading=!0,this.application_details.permissions=this.application_details.permissions?o.concat(this.application_permissions,this.selectedPermissions.value):this.selectedPermissions.value;var e=this;this.request.PostRequest("api/application/edit",{applications:this.application_details},function(t){"00"===t.code?(e.toastr.success("Application permisions added successfully","Add Application Permisions",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Add Application Permisions")},this.dialogRef)},e.prototype.checkPermission=function(e){return o.indexOf(this.application_permissions,e)>=0},e}())},KfhI:function(e,t,s){"use strict";s.d(t,"a",function(){return o});var i=s("gIcY"),o=(s("a9NN"),function(){function e(e,t,s,o,r,n){this.formBuilder=e,this.request=t,this.toastr=s,this.router=o,this.dialogRef=n,this.permission_details={},this.isLoading=!1,this.options={query:{},config_name:["MENU_TYPES","MENU_CATAGORIES","MENU_LIST","SYSTEM_CHANNELS"]},this.Category=[],this.Type=[],this.Menu=[],this.Channel=[],this.category=new i.f,this.type=new i.f,this.menu=new i.f,this.channel=new i.f}return e.prototype.ngOnInit=function(){this.createForm(),this.getConfig()},e.prototype.getConfig=function(){var e=this;e.request.PostRequest("api/user/list_config",this.options,function(t){"00"===t.code&&t.data?(e.Category=t.data.MENU_CATAGORIES,e.Type=t.data.MENU_TYPES,e.Menu=t.data.MENU_LIST,e.Channel=t.data.SYSTEM_CHANNELS):e.toastr.warning("No Configs(s) found","NOTE")},this.dialogRef)},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.savePermission=function(){this.isLoading=!0,this.permission_details=this.searchForm.value,this.permission_details.code=this.permission_details.code.replace(/\s/g,"_").toUpperCase(),this.permission_details.category=this.category.value,this.permission_details.type=this.type.value,this.permission_details.menu=this.menu.value,this.permission_details.channel=this.channel.value;var e=this;this.request.PostRequest("api/permission/create",{permission:this.permission_details},function(t){"00"===t.code?(e.toastr.success("permission created successfully","Add Permission",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):(e.isLoading=!1,e.toastr.error(t.message,"Add Permission"))},this.dialogRef)},e.prototype.createForm=function(){this.searchForm=this.formBuilder.group({code:["",i.w.required]})},e}())},KqO0:function(e,t,s){"use strict";var i=s("gIcY"),o=(s("a9NN"),function(){function e(){}return e.prototype.isErrorState=function(e,t){return!!(e&&e.invalid&&(e.dirty||e.touched||t&&t.submitted))},e}());s.d(t,"a",function(){return r});var r=function(){function e(e,t,s,i,r,n){this.formBuilder=e,this.request=t,this.toastr=s,this.router=i,this.dialogRef=n,this.isLoading=!1,this.matcher=new o}return e.prototype.ngOnInit=function(){this.user_details=JSON.parse(sessionStorage.getItem("update_user")),this.createFrom(this.user_details)},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.createFrom=function(e){var t,s;this.usernameForm=this.formBuilder.group({currentUsername:[{value:e.username,disabled:!0}],newUsername:["",[i.w.required,function(e){if(!e.parent)return null;if(!t){if(t=e,!(s=e.parent.get("currentUsername")))throw new Error("unmatchOtherValidator(): other control is not found in parent group");s.valueChanges.subscribe(function(){t.updateValueAndValidity()})}return s&&s.value===t.value?{matchOther:!0}:null}]]})},e.prototype.saveUsername=function(){var e=this;e.isLoading=!0,this.request.PostRequest("api/user/change_username",{update_user_id:e.user_details._id,new_username:e.usernameForm.value.newUsername},function(t){"00"===t.code?(e.toastr.success("user created successfully","Add User",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Add User"),e.isLoading=!1},this.dialogRef)},e}()},LoV5:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("gIcY"),o=s("LvDl"),r=(s("a9NN"),function(){function e(e,t,s,o,r){this.request=e,this.toastr=t,this.router=s,this.dialogRef=r,this.Permissions=[],this.role_permissions=[],this.role_details={},this.isLoading=!1,this.selectedPermissions=new i.f}return e.prototype.ngOnInit=function(){this.GetPermissions(),this.role_details=JSON.parse(sessionStorage.getItem("selectedRole")),this.role_permissions=this.role_details.permissions||[]},e.prototype.GetPermissions=function(){var e=this;this.request.PostRequest("api/permission/list_all",{query:{}},function(t){"00"===t.code&&(e.Permissions=t.data)},this.dialogRef)},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.AddRolePermissions=function(){this.isLoading=!0,this.role_details.permissions=this.role_details.permissions?o.concat(this.role_permissions,this.selectedPermissions.value):this.selectedPermissions.value;var e=this;this.request.PostRequest("api/role/edit",{role:this.role_details},function(t){"00"===t.code?(e.toastr.success("role permisions added successfully","Add Role Permisions",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Add Role Permisions")},this.dialogRef)},e.prototype.checkPermission=function(e){return o.indexOf(this.role_permissions,e)>=0},e}())},TtEo:function(e,t,s){"use strict";s.d(t,"a",function(){return o}),s.d(t,"b",function(){return r});var i=s("CcnG"),o=(s("LC5p"),s("Ip0R"),s("Fzqc"),s("Wf4p"),i["\u0275crt"]({encapsulation:2,styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],data:{}}));function r(e){return i["\u0275vid"](2,[],null,null)}},TygV:function(e,t,s){"use strict";s.d(t,"a",function(){return n});var i=s("gIcY"),o=s("LvDl"),r=s("AytR"),n=(s("a9NN"),function(){function e(e,t,s,o,n,a){this.formBuilder=e,this.request=t,this.toastr=s,this.router=o,this.dialogRef=a,this.Platform=["WEB-API","PORTAL"],this.systemList=r.a.systems,this.isCompleted=!1,this.isLoading=!1,this.application_details={},this.Permissions=[],this.selectedSystem=new i.f,this.selectedPermissions=new i.f}return e.prototype.ngOnInit=function(){this.createForm()},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.onStep1Next=function(e){var t=this;t.application_details=this.searchForm.value,t.application_details.name=t.application_details.name.replace(" ","_").toUpperCase(),t.application_details.description=t.application_details.description.toUpperCase()},e.prototype.onStep2Next=function(e){var t=this;this.request.PostRequest("api/permission/list_all",{query:{}},function(e){"00"===e.code&&(t.Permissions=e.data)},this.dialogRef)},e.prototype.onStep3Next=function(e){this.isCompleted=!1},e.prototype.displayPermission=function(e){var t=o.findIndex(this.Permissions,{_id:e});return this.Permissions[t].code},e.prototype.onComplete=function(e){this.isLoading=!0,this.application_details.organizationID=this.selectedSystem.value,this.application_details.permissions=[],this.application_details.permissions=this.selectedPermissions.value;var t=this;this.request.PostRequest("api/application/create",{applications:this.application_details},function(e){"00"===e.code?(t.isCompleted=!0,t.toastr.success("Application created successfully","Add Application",{timeOut:3e3}),t.dialogRef.close(),t.router.navigate(["/dashboard"],{replaceUrl:!0})):t.toastr.error(e.message,"Add Application")},this.dialogRef)},e.prototype.createForm=function(){this.searchForm=this.formBuilder.group({code:["",i.w.required],name:["",i.w.required],description:["",i.w.required],channel_name:["",i.w.required]})},e}())},VtZK:function(e,t,s){"use strict";s.d(t,"a",function(){return o});var i=s("gIcY"),o=(s("a9NN"),function(){function e(e,t,s,i,o,r){this.formBuilder=e,this.request=t,this.toastr=s,this.router=i,this.dialogRef=r,this.application_details={},this.isLoading=!1}return e.prototype.ngOnInit=function(){this.application_details=JSON.parse(sessionStorage.getItem("selectedApplication")),this.createForm(this.application_details)},e.prototype.onComplete=function(){var e=this;e.isLoading=!0,e.application_details.name=e.searchForm.value.name.toUpperCase(),e.application_details.description=e.searchForm.value.description.toUpperCase(),e.request.PostRequest("api/application/edit",{applications:e.application_details},function(t){"00"===t.code?(e.toastr.success("application updated successfully","Edit Application",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Edit Application")},e.dialogRef)},e.prototype.createForm=function(e){this.searchForm=this.formBuilder.group({name:[e.name,i.w.required],description:[e.description,i.w.required]})},e.prototype.Close=function(){this.dialogRef.close()},e}())},Xurh:function(e,t,s){"use strict";s.d(t,"a",function(){return n});var i=s("gIcY"),o=s("LvDl"),r=s("AytR"),n=(s("a9NN"),function(){function e(e,t,s,o,n,a){this.formBuilder=e,this.request=t,this.toastr=s,this.router=o,this.dialogRef=a,this.systemList=r.a.systems,this.isCompleted=!1,this.isLoading=!1,this.role_details={},this.Permissions=[],this.selectedSystem=new i.f,this.selectedPermissions=new i.f}return e.prototype.ngOnInit=function(){this.createForm()},e.prototype.Close=function(){this.dialogRef.close(),this.router.navigate(["/roles-management"],{replaceUrl:!0})},e.prototype.onStep1Next=function(e){var t=this;t.role_details=this.searchForm.value,t.role_details.name=t.role_details.name.replace(" ","_").toUpperCase(),t.role_details.description=t.role_details.description.toUpperCase()},e.prototype.onStep2Next=function(e){var t=this;this.request.PostRequest("api/permission/list_all",{query:{}},function(e){"00"===e.code&&(t.Permissions=e.data)},this.dialogRef)},e.prototype.onStep3Next=function(e){this.isCompleted=!1},e.prototype.displayPermission=function(e){var t=o.findIndex(this.Permissions,{_id:e});return this.Permissions[t].code},e.prototype.onComplete=function(e){this.isLoading=!0,this.role_details.organizationID=this.selectedSystem.value,this.role_details.permissions=[],this.role_details.permissions=this.selectedPermissions.value;var t=this;this.request.PostRequest("api/role/create",{role:this.role_details},function(e){"00"===e.code?(t.isCompleted=!0,t.toastr.success("role created successfully","Add Role",{timeOut:3e3}),t.dialogRef.close(),t.router.navigate(["/dashboard"],{replaceUrl:!0})):t.toastr.error(e.message,"Add Role")},this.dialogRef)},e.prototype.createForm=function(){this.searchForm=this.formBuilder.group({name:["",i.w.required],description:["",i.w.required]})},e}())},e3tG:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("gIcY"),o=s("LvDl"),r=(s("a9NN"),function(){function e(e,t,s,o,r,n){this.formBuilder=e,this.request=t,this.toastr=s,this.router=o,this.dialogRef=n,this.Roles=[],this.Platform=["WEB-API","PORTAL","APP"],this.isCompleted=!1,this.user_details={},this.Branches=[],this.selectedBranch=new i.f,this.selectedRoles=new i.f,this.selectedPlatform=new i.f,this.color="primary",this.checked=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){this.createForm()},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.onStep1Next=function(e){var t=this;t.user_details=t.searchForm.value,t.user_details.username=t.user_details.email,t.user_details.msisdn=t.user_details.msisdn.toString(),t.user_details.msisdn=""+(9===t.user_details.msisdn.length?"27"+t.user_details.msisdn:10===t.user_details.msisdn.length?"27"+t.user_details.msisdn.substring(1,9):t.user_details.msisdn),this.request.PostRequest("api/role/list_org",{},function(e){"00"===e.code&&(t.Roles=e.data)},this.dialogRef)},e.prototype.onStep2Next=function(e){var t=this;try{t.Branches=JSON.parse(sessionStorage.getItem("branches")),0===t.Branches.length&&this.request.PostRequest("api/branch/list_all",{},function(e){"00"===e.code&&(t.Branches=e.data)},this.dialogRef)}catch(e){this.request.PostRequest("api/branch/list_all",{},function(e){"00"===e.code&&(t.Branches=e.data)},this.dialogRef)}},e.prototype.onStep3Next=function(e){this.isCompleted=!1},e.prototype.displayRole=function(e){var t=o.findIndex(this.Roles,{_id:e});return this.Roles[t].name},e.prototype.displayBranch=function(e){var t=o.findIndex(this.Branches,{_id:e});return t>0?this.Branches[t].name:null},e.prototype.onComplete=function(e){this.user_details.branch=this.selectedBranch.value||null,this.user_details.platform=this.selectedPlatform.value,this.user_details.roles=[],this.user_details.roles=this.selectedRoles.value;var t=this;this.request.PostRequest("api/user/process_user",this.user_details,function(e){"00"===e.code?(t.isCompleted=!0,t.toastr.success("user created successfully","Add User",{timeOut:3e3}),t.dialogRef.close(),t.router.navigate(["/dashboard"],{replaceUrl:!0})):t.toastr.error(e.message,"Add User")},this.dialogRef)},e.prototype.createForm=function(){this.searchForm=this.formBuilder.group({firstName:["",i.w.required],lastName:["",i.w.required],msisdn:["",i.w.compose([i.w.required,i.w.minLength(4),i.w.maxLength(15)])],username:[""],email:["",i.w.compose([i.w.required,i.w.email])]})},e}())},jgZw:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("gIcY"),o=s("LvDl"),r=(s("a9NN"),function(){function e(e,t,s,o,r){this.request=e,this.toastr=t,this.router=s,this.dialogRef=r,this.Roles=[],this.user_roles=[],this.user_details={},this.isLoading=!1,this.selectedRoles=new i.f}return e.prototype.ngOnInit=function(){this.GetRoles(),this.user_details=JSON.parse(sessionStorage.getItem("update_user")),this.user_roles=this.user_details.roles||[]},e.prototype.GetRoles=function(){var e=this;this.request.PostRequest("api/role/list_all",{query:{}},function(t){"00"===t.code&&(e.Roles=t.data)},this.dialogRef)},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.AddUserRoles=function(){this.isLoading=!0,this.user_details.roles=this.user_details.roles?o.concat(this.user_roles,this.selectedRoles.value):this.selectedRoles.value;var e=this;this.request.PostRequest("api/user/updated_user",{update_user:this.user_details},function(t){"00"===t.code?(e.toastr.success("User role added successfully","Add User Roles",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Add User Roles")},this.dialogRef)},e.prototype.checkRole=function(e){return o.indexOf(this.user_roles,e)>=0},e}())},nNcj:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("gIcY"),o=s("LvDl"),r=(s("a9NN"),function(){function e(e,t,s,o,r){this.request=e,this.toastr=t,this.router=s,this.dialogRef=r,this.Permissions=[],this.role_permissions=[],this.role_details={},this.isLoading=!1,this.selectedPermissions=new i.f}return e.prototype.ngOnInit=function(){this.GetPermissions(),this.role_details=JSON.parse(sessionStorage.getItem("selectedRole")),this.role_permissions=this.role_details.permissions||[]},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.GetPermissions=function(){var e=this;this.request.PostRequest("api/permission/list_all",{query:{}},function(t){"00"===t.code&&(e.Permissions=t.data)},this.dialogRef)},e.prototype.RemoveRolePermissions=function(){this.isLoading=!0,this.role_details.permissions=o.difference(this.role_permissions,this.selectedPermissions.value);var e=this;this.request.PostRequest("api/role/edit",{role:this.role_details},function(t){"00"===t.code?(e.toastr.success("role permisions removed successfully","Remove Role Permisions",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Remove Role Permisions")},this.dialogRef)},e.prototype.displayPermission=function(e){var t=o.findIndex(this.Permissions,{_id:e});return this.Permissions[t].code},e}())},wyWt:function(e,t,s){"use strict";s.d(t,"a",function(){return o});var i=s("gIcY"),o=(s("a9NN"),function(){function e(e,t,s,i,o,r){this.formBuilder=e,this.request=t,this.toastr=s,this.router=i,this.dialogRef=r,this.Branches=[],this.isLoading=!1}return e.prototype.ngOnInit=function(){this.user_details=JSON.parse(sessionStorage.getItem("update_user")),this.user=JSON.parse(sessionStorage.getItem("user")),this.Branches=JSON.parse(sessionStorage.getItem("branches")),this.createFrom(this.user_details)},e.prototype.Close=function(){this.dialogRef.close()},e.prototype.saveEditUser=function(){var e=this;e.isLoading=!0;var t=e.userForm.value;t._id=e.user_details._id,this.request.PostRequest("api/user/updated_user",{update_user:t},function(t){"00"===t.code?(e.toastr.success("user updated successfully","Edit User",{timeOut:3e3}),e.dialogRef.close(),e.router.navigate(["/dashboard"],{replaceUrl:!0})):e.toastr.error(t.message,"Edit User"),e.isLoading=!1},this.dialogRef)},e.prototype.createFrom=function(e){var t=this.user._id===this.user_details._id;this.userForm=this.formBuilder.group({firstName:[e.firstName,[i.w.required]],lastName:[e.lastName,[i.w.required]],msisdn:[e.msisdn,[i.w.required]],branch:[{value:e.branch,disabled:t},[i.w.required]],email:[{value:e.email,disabled:t},[i.w.required,i.w.email]]})},e}())}}]);